<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
<f:metadata>
    <f:event type="preRenderView" listener="#{commentsService.getIdeaComments(ideasBean.name)}" />
</f:metadata>
<h:head>
    <title>Ideas Page</title>

</h:head>
<h:body>
    <h:form>
        <h1>Registra tu idea</h1>
        <div id="contenedor">

            <p>Nombre de la propuesta:</p>
            <h:outputText value="#{ideasBean.name}"/>
            <p>Topico:</p>
            <h:outputText value="#{ideasBean.topic}"/>
            <p>Description de la idea:</p>
            <h:outputText value="#{ideasBean.description}"/>
            <p>palabras clave:</p>
            <h:outputText value="#{ideasBean.keyWords}"/>
            <p>Proponente:</p>
            <h:outputText value="#{ideasBean.proponent}"/>
            <p>Area del Proponente:</p>
            <h:outputText value="#{ideasBean.proponentArea}"/>

            <p:commandButton value="Me gusta" actionListener="#{ideasService.changueLike(ideasService.getIdea(ideasBean.name), userBean.username)}" />
            <p:commandButton value="Devolver" action="consu.xhtml?faces-redirect=true" />

            <p>Â¿Quieres dejar tu comentario?:</p>
            <p:inputText class="input" value="#{comment}" placeholder="Comentario"/>
            <p:commandButton value="Comentar" action="#{commentsService.addComment(ideasBean.name, userBean.username, comment)}"  update="table1"/>

            <p:dataTable id="table1" value="#{commentsService.commentsList}" var="item" >
                <p:column class="centradas" headerText="Usuario" sortBy="#{item.username}">
                    <h:outputText  value="#{item.username}" />
                </p:column>
                <p:column class="centradas"  headerText="Fecha">
                    <h:outputText  value="#{item.date}" />
                </p:column>
                <p:column class="centradas"  headerText="Comentario">
                    <h:outputText  value="#{item.comment}" />
                </p:column>

            </p:dataTable>
        </div>

    </h:form>
</h:body>
</html>